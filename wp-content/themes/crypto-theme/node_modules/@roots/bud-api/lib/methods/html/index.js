import isObject from '@roots/bud-support/lodash/isObject';
/**
 * Set HTML template
 */
export const html = async function (options) {
    const { getHtmlPluginOptions } = await import(`./helpers.js`);
    const enabled = options !== false;
    const htmlExtension = this.extensions.get(`@roots/bud-extensions/html-webpack-plugin`);
    htmlExtension.enable(enabled);
    const htmlOptions = getHtmlPluginOptions(this, options);
    if (isObject(htmlOptions)) {
        Object.entries(htmlOptions).forEach(v => htmlExtension.set(...v));
    }
    const interpolateVariablesExtension = this.extensions.get(`@roots/bud-extensions/interpolate-html-webpack-plugin`);
    interpolateVariablesExtension.enable(enabled);
    if (isObject(options) && isObject(options.replace)) {
        Object.entries(options.replace).forEach((v) => interpolateVariablesExtension.set(...v));
    }
    return this;
};
